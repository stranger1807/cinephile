{"version":3,"file":"SearchView-85ee9413.js","sources":["../../src/stores/search.js","../../src/components/Search/Search.vue"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { baseUrl, lang, headers } from \"@/static\";\r\n\r\nexport const useSearch = defineStore(\"search\", {\r\n  state: () => ({\r\n    searchArray: null,\r\n    search: \"\",\r\n    adult: false,\r\n    total_pages: 0,\r\n  }),\r\n  actions: {\r\n    async getSearch(page = 1) {\r\n      if (this.search != \"\") {\r\n        try {\r\n          const res = await axios({\r\n            method: \"GET\",\r\n            url: `${baseUrl}search/multi?query=${this.search}&include_adult=${this.adult}&language=${lang}&page=${page}`,\r\n            headers: headers,\r\n          });\r\n\r\n          this.searchArray = res.data.results;\r\n          this.total_pages = res.data.total_pages\r\n          console.log(res.data);\r\n        } catch (error) {\r\n          console.error(\"error in Search Store\", error);\r\n        }\r\n      } else {\r\n        this.searchArray = null;\r\n      }\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <section class=\"search\">\r\n    <div class=\"container\">\r\n      <input\r\n        type=\"text\"\r\n        class=\"search__input\"\r\n        :placeholder=\"placeholder\"\r\n        v-model=\"searchInput\"\r\n      />\r\n      <div class=\"content__list\" v-if=\"array != null\">\r\n        <ContentItem\r\n          v-for=\"content in array\"\r\n          :key=\"content.id\"\r\n          :content=\"content\"\r\n          :type=\"content.type\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { useSearch } from \"@/stores/search\";\r\nimport { ref, watch } from \"vue\";\r\nimport ContentItem from \"@/components/UI/ContentItem.vue\";\r\n\r\nconst searchStore = useSearch();\r\nconst props = defineProps([\"placeholder\"]);\r\n\r\nlet searchInput = ref(\"\");\r\nconst array = ref([]);\r\nwatch(\r\n  () => searchInput.value,\r\n  (value) => {\r\n    searchStore.search = value;\r\n    searchStore.getSearch();\r\n    array.value = searchStore.searchArray;\r\n  }\r\n);\r\n</script>\r\n"],"names":["useSearch","defineStore","page","res","axios","baseUrl","lang","headers","error","searchStore","searchInput","ref","array","watch","value"],"mappings":"+MAIO,MAAMA,EAAYC,EAAY,SAAU,CAC7C,MAAO,KAAO,CACZ,YAAa,KACb,OAAQ,GACR,MAAO,GACP,YAAa,CACjB,GACE,QAAS,CACP,MAAM,UAAUC,EAAO,EAAG,CACxB,GAAI,KAAK,QAAU,GACjB,GAAI,CACF,MAAMC,EAAM,MAAMC,EAAM,CACtB,OAAQ,MACR,IAAK,GAAGC,uBAA6B,KAAK,wBAAwB,KAAK,kBAAkBC,UAAaJ,IACtG,QAASK,CACrB,CAAW,EAED,KAAK,YAAcJ,EAAI,KAAK,QAC5B,KAAK,YAAcA,EAAI,KAAK,YAC5B,QAAQ,IAAIA,EAAI,IAAI,CACrB,OAAQK,EAAP,CACA,QAAQ,MAAM,wBAAyBA,CAAK,CAC7C,MAED,KAAK,YAAc,IAEtB,CACF,CACH,CAAC,+ICND,MAAMC,EAAcT,EAAS,EAG7B,IAAIU,EAAcC,EAAI,EAAE,EACxB,MAAMC,EAAQD,EAAI,CAAA,CAAE,EACpB,OAAAE,EACE,IAAMH,EAAY,MACjBI,GAAU,CACTL,EAAY,OAASK,EACrBL,EAAY,UAAS,EACrBG,EAAM,MAAQH,EAAY,WAC3B,CACH"}